<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.d.mapper.DMapper">
	<insert id="joinUser" parameterType="egovframework.d.model.UserDDTO">
		INSERT INTO USER (
			id, 
			password
		) VALUES (
			#{id},
			#{password}
		);
	</insert>
	
	<select id="checkUser" parameterType="String" resultType="int">
		SELECT COUNT(*)
		FROM USER
		WHERE id=#{id};
	</select>
	
	<select id="loginUser" parameterType="egovframework.d.model.UserDDTO" resultType="egovframework.d.model.UserDDTO">
		SELECT *
		FROM USER
		WHERE id=#{id} AND password=#{password};
	</select>
	
	<select id="lisq100" resultType="egovframework.d.model.lisq100DTO">
		SELECT QC_CODE, QC_NAME, LOT_NO, QC_LEVEL, C.ITEM1, START_DATE, END_DATE, QC_SPECIMEN_SER
		FROM lisq100 AS Q
		JOIN lisc002 AS C
		ON C.CODE_TYPE = 'JUNDAL_PART' AND Q.JUNDAL_PART = C.CODE
		ORDER BY QC_CODE, QC_NAME, QC_LEVEL, START_DATE;
	</select>
	
	<select id="lisq110" parameterType="String" resultType="egovframework.d.model.lisq110DTO">
		SELECT Q.TEST_CODE, C1.GUMSA_NAME1, C2.ITEM1, MEAN_VALUE, SD_VALUE, CV_VALUE, LOW_VALUE, HIGH_VALUE, SUSUL_VALUE, DANUI, Q.START_DATE, Q.END_DATE, RULE_1_2S, GUBUN_1_2S, RULE_1_3S, GUBUN_1_3S, RULE_2_2S, GUBUN_2_2S, RULE_R_4S, GUBUN_R_4S, RULE_4_1S, GUBUN_4_1S, RULE_10X, GUBUN_10X, TEST_CODE_SEQ, GRAPH_YN
		FROM lisq110 AS Q
		JOIN lisc100 AS C1
		ON Q.TEST_CODE = C1.TEST_CODE
		JOIN lisc002 AS C2
		ON C2.CODE_TYPE = 'JUNDAL_PART' AND Q.JUNDAL_PART = C2.CODE
		WHERE Q.QC_CODE = #{qcCode}
		ORDER BY Q.QC_CODE, Q.TEST_CODE, C1.GUMSA_NAME1, Q.START_DATE;
	</select>
	
	<select id="lisc100" resultType="egovframework.d.model.lisc100DTO">
		SELECT TEST_CODE, GUMSA_NAME1
		FROM lisc100
		ORDER BY TEST_CODE, GUMSA_NAME1;
	</select>
</mapper>